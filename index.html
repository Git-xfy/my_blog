<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>我的学习笔记</title><meta name="author" content="Xue"><meta name="copyright" content="Xue"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="我的学习笔记">
<meta property="og:url" content="https://feiyblog.netlify.app/index.html">
<meta property="og:site_name" content="我的学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250423093410435.jpg">
<meta property="article:author" content="Xue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250423093410435.jpg"><link rel="shortcut icon" href="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250424131237614.png"><link rel="canonical" href="https://feiyblog.netlify.app/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?568315545f51aa0aac415d8a71f8bd8f";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '我的学习笔记',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'home'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background: linear-gradient(90deg,rgba(42, 123, 155, 1) 0%, rgba(171, 169, 169, 1) 100%, rgba(237, 221, 83, 1) 100%);;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250423093410435.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250423091922134.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">我的学习笔记</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="site-info"><h1 id="site-title">我的学习笔记</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts nc" id="recent-posts"><div class="recent-post-items"><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/14/orbslam2-16/" title="优化——全局优化"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231608640.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="优化——全局优化"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/14/orbslam2-16/" title="优化——全局优化">优化——全局优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-14T06:31:42.000Z" title="发表于 2025-05-14 14:31:42">2025-05-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content"> Global Optimization  一、全局优化的目标与核心思想 在视觉惯性SLAM (Simultaneous Localization and Mapping) 系统中，全局优化 (Global Bundle Adjustment, GBA) 是一个至关重要的后端优化步骤。其核心目标是优化系统中所有关键帧的位姿（位置和姿态）以及所有三维地图点（Map Points）的空间坐标。通过这一过程，可以显著减少由于传感器噪声、运动估计误差和匹配不确定性等因素造成的累积漂移，从而构建一个全局一致且高精度的地图，并提升相机自身的定位精度。 核心思想：捆绑调整 (Bundle Adjustment, BA) 全局优化的数学实质是执行一次大规模的捆绑调整。这个名字形象地描述了其工作原理：想象场景中的三维点通过光线（bundles of rays）投影到不同时刻相机捕获的图像上。BA的目标就是通过微调每一个关键帧的位姿和每一个三维地图点的位置，使得这些三维点在各个观测到它的关键帧图像上的重投影误差 (Reprojection Error)...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2025/05/14/orbslam2-15/" title="优化——闭环时本质图优化"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231608640.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="优化——闭环时本质图优化"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/14/orbslam2-15/" title="优化——闭环时本质图优化">优化——闭环时本质图优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-14T06:31:08.000Z" title="发表于 2025-05-14 14:31:08">2025-05-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content">本章节主要阐述在ORB-SLAM2系统中，当检测到闭环（Loop Closing）后，如何通过优化一个称为“本质图”（Essential Graph）的结构来全局校正和优化所有关键帧的位姿。这个过程对消除累积误差、提升地图全局一致性和定位精度至关重要。  一、优化的核心目标与对象  核心函数：OptimizeEssentialGraph。 主要目标：在闭环确认后，对系统中所有已记录的关键帧的位姿（包括位置和姿态，即Sim(3)变换）进行一次全局性的优化调整。 关键点：  不直接优化地图点：在这一特定步骤中，优化过程的变量是关键帧的位姿，而不是三维地图点的坐标。地图点的位置会在关键帧位姿优化完毕后，根据其参考关键帧的位姿更新进行调整。 全局性：优化会影响到地图中所有的关键帧，以达到全局最优的目的。     二、本质图的构成：顶点...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/14/orbslam2-14/" title="优化——Sim(3) 位姿优化"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231608640.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="优化——Sim(3) 位姿优化"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/14/orbslam2-14/" title="优化——Sim(3) 位姿优化">优化——Sim(3) 位姿优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-14T06:30:26.000Z" title="发表于 2025-05-14 14:30:26">2025-05-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content"> 闭环线程中的 Sim(3) 位姿优化 理解在检测到潜在的闭环时，系统如何优化当前关键帧 (KF1) 与闭环候选关键帧 (KF2) 之间的相对位姿。此相对位姿通过一个 Sim(3) 变换（包含旋转、平移和尺度信息）来描述。关键点在于，此优化过程仅针对 Sim(3) 位姿进行，地图点的三维坐标在此步骤中保持固定，不参与优化。  一、核心思想：图优化 (Graph Optimization) 该优化过程依赖于图优化方法，具体实现通常借助 g2o (General Graph Optimization) 框架。图优化的基本组成元素如下：  顶点 (Vertices)： 图中的节点，代表了系统中待优化的变量。在我们的场景中，主要是 Sim(3) 位姿。 边 (Edges)： 连接顶点的边，代表了这些变量之间存在的约束关系。这些约束通常以误差函数的形式表达，优化的目标是最小化所有误差的总和。   二、顶点的选择 (Vertices) 在闭环的 Sim(3) 位姿优化问题中，主要涉及以下两种类型的顶点：  待优化的 Sim(3) 位姿:  描述：...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2025/05/14/orbslam2-13/" title="优化——局部地图优化"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231608640.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="优化——局部地图优化"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/14/orbslam2-13/" title="优化——局部地图优化">优化——局部地图优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-14T06:29:45.000Z" title="发表于 2025-05-14 14:29:45">2025-05-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content"> 局部建图线程中局部地图优化 (Local Bundle Adjustment in Local Mapping Thread)  引言 在 ORB-SLAM2 系统中，局部建图线程负责处理新的关键帧，并优化局部的地图。LocalBundleAdjustment (局部BA) 是该线程中的核心函数，主要用于优化当前关键帧及其邻近区域的关键帧位姿和它们观测到的地图点三维位置，以构建一个局部一致的地图。  核心思想 全局的 Bundle Adjustment (BA) 会优化所有的关键帧和地图点，计算成本非常高。局部BA的思想是只对当前活跃的、与当前关键帧紧密相关的一个子图进行优化。这大幅降低了计算复杂度，使得系统能够实时运行，同时通过不断优化局部区域，逐步累积实现全局地图的一致性。   关键概念 (参考图 14-2) 理解局部BA，首先要明确参与优化的不同元素：  当前关键帧 (Current KF):  定义：最新插入到地图的关键帧，是本次局部BA的触发者和中心。 图14-2标识：中间的红色相机图标 (“当前KF”)。   局部关键帧 (LocalKeyFrames /...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/14/orbslam2-12/" title="优化——跟踪线程仅优化位姿"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231608640.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="优化——跟踪线程仅优化位姿"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/14/orbslam2-12/" title="优化——跟踪线程仅优化位姿">优化——跟踪线程仅优化位姿</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-14T06:28:29.000Z" title="发表于 2025-05-14 14:28:29">2025-05-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content"> 1. 概述 PoseOptimization 函数是ORB-SLAM2中用于跟踪线程 (Tracking Thread) 的一个关键优化步骤。其核心目标是：  仅优化当前帧的相机位姿 (SE(3)SE(3)SE(3)变换)。 不优化地图点 (MapPoints) 的三维位置，即假设地图点在世界坐标系中的位置是固定的。  此函数主要应用在跟踪过程中的运动跟踪、参考帧跟踪、地图跟踪和重定位阶段。  2. 图优化基础：顶点与边 该优化过程基于图优化理论，使用g2o库来实现。图由顶点和边构成。  2.1. 顶点 (Vertex)  定义: 代表当前帧的相机位姿，这也是本次优化的待优化变量。 表示: 通常是一个 SE(3)SE(3)SE(3) 变换，描述了从世界坐标系 (World Frame) 到当前相机坐标系 (Camera Frame) 的旋转 (RRR) 和平移 (ttt)。  Tcw=(Rcwtcw01)T_{cw} = \begin{pmatrix} R_{cw} &amp; t_{cw} \\ 0 &amp; 1...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2025/05/13/orbslam2-11/" title="跟踪 —— 局部地图跟踪"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231601621.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="跟踪 —— 局部地图跟踪"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/13/orbslam2-11/" title="跟踪 —— 局部地图跟踪">跟踪 —— 局部地图跟踪</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-13T07:22:54.000Z" title="发表于 2025-05-13 15:22:54">2025-05-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content"> Local Map Tracking  1. 目标与定位  角色：第二阶段跟踪，在初步跟踪（参考关键帧、恒速模型、重定位）之后进行。 目的：利用更丰富的局部地图信息，对第一阶段获得的当前帧位姿进行精细化优化，得到更准确的位姿。 核心：增加匹配约束，仅优化当前帧位姿。   2. 与“局部建图线程 (Local Mapping)”的区别  局部地图 (Local Map) - 用于本阶段（局部地图跟踪）  数据：由局部关键帧及其观测到的局部地图点构成。 功能：为当前帧提供投影匹配候选，仅优化当前帧位姿。不改变关键帧位姿，也不改变地图点三维坐标。 本质：“用图”来精调当前帧。   局部建图线程 (Local Mapping) - 独立线程  数据：处理新生成的关键帧。 功能：  生成新的地图点。 进行局部BA (Bundle Adjustment)，同时优化局部区域内的关键帧位姿和地图点坐标。 剔除冗余关键帧和不可靠地图点。   本质：“建图”与“维护图”。     3. 局部地图跟踪的核心步骤  第 1...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/13/orbslam2-9/" title="跟踪 —— 重定位跟踪"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231601621.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="跟踪 —— 重定位跟踪"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/13/orbslam2-9/" title="跟踪 —— 重定位跟踪">跟踪 —— 重定位跟踪</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-13T07:21:32.000Z" title="发表于 2025-05-13 15:21:32">2025-05-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content"> Relocalization  一、核心目标与触发时机  核心目标： 当系统由于各种原因（如快速运动、场景剧变、遮挡等）导致跟踪丢失，即无法确定当前相机帧相对于已有地图的位姿时，重定位模块的目标是在已构建的地图中重新找回当前帧的准确位姿。 触发时机： 这是 SLAM 系统中的一种**“拯救”或“恢复”机制**。它在常规的、依赖连续性的跟踪方法（如恒速模型跟踪、参考关键帧跟踪）均宣告失败后被激活。   二、核心思想：全局搜索与局部验证 重定位的整个过程可以概括为两个主要阶段，体现了从粗略的全局匹配到精确的局部验证的思想：  全局外观搜索 (Global Appearance-Based Search)：  由于跟踪已经丢失，系统对当前帧的位姿没有任何先验信息或良好的初始估计。 策略： 利用词袋模型 (Bag-of-Words, BoW) 在整个历史关键帧数据库 (KeyFrame Database) 中进行快速、大规模的搜索。 目的： 找出那些在视觉外观上与当前丢失帧最相似的候选关键帧 (Candidate...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2025/05/13/orbslam2-8/" title="跟踪 —— 恒速跟踪"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231601621.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="跟踪 —— 恒速跟踪"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/13/orbslam2-8/" title="跟踪 —— 恒速跟踪">跟踪 —— 恒速跟踪</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-13T07:20:59.000Z" title="发表于 2025-05-13 15:20:59">2025-05-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content"> TrackWithMotionModel  一、核心思想与定义 恒速模型跟踪基于一个核心假设：在连续的图像帧之间极短的时间内（通常为几十毫秒），相机的运动状态可以近似为匀速运动。 因此，可以利用上一帧的位姿以及先前估计得到的**帧间相对运动（速度和角速度，统称为速度 V）来预测当前帧的位姿，并以此为初始值进行后续的匹配和优化。  二、为何使用恒速模型跟踪？  效率优先：  在地图初始化并通过参考关键帧跟踪成功获得初始速度后，恒速模型提供了一种更简单、计算更快的位姿估计方法。 相比于参考关键帧跟踪（涉及词袋匹配等），恒速模型直接利用运动先验，对实时性要求高的SLAM系统非常重要。   常用策略：  一旦系统有了速度信息，恒速模型便成为跟踪线程中的首选和最常用的跟踪方法。     三、关键公式  速度 (Velocity) V\mathbf{V}V：  表示从上一帧 (l) 到当前帧 (c) 的相对位姿变换 Tcl\mathbf{T}_{\mathrm{cl}}Tcl​。 如果上一帧的世界位姿为 Tlw\mathbf{T}{\mathrm{lw}}Tlw，当前帧的世界位姿为...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/13/orbslam2-7/" title="跟踪 —— 参考关键帧跟踪"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231601621.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="跟踪 —— 参考关键帧跟踪"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/13/orbslam2-7/" title="跟踪 —— 参考关键帧跟踪">跟踪 —— 参考关键帧跟踪</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-13T07:20:06.000Z" title="发表于 2025-05-13 15:20:06">2025-05-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content"> TrackReferenceKeyFrame  一、核心目标 当相机捕获到新的普通帧（位姿未知）时，利用一个已知的、位姿相对准确的参考关键帧 (Reference KeyFrame) 来估计当前普通帧的精确位姿。  二、应用场景 参考关键帧跟踪主要在以下两种情况下被调用：  系统刚初始化后：  场景描述： SLAM 系统通过初始几帧（如第1、2帧）完成地图初始化，并将它们设为关键帧。当后续帧（如第3帧）进入时，系统尚无稳定的运动模型（例如，恒速模型中的速度为空）。 为何使用： 此时，最可靠的方式是直接将新帧与已初始化的关键帧进行匹配，以获得新帧的初始位姿。参考关键帧的位姿是后续建图和跟踪的基础，相对可靠。   恒速模型跟踪失败后：  场景描述： 系统尝试使用恒速模型预测当前帧位姿失败（可能由于相机运动剧烈、场景纹理缺乏等）。 为何使用：  恒速模型局限性： 仅依赖前一帧信息，信息量有限，速度估计可能不准，易导致错误匹配。 参考关键帧优势： 通常经过局部建图线程优化，位姿更精确；可能关联了更多地图点，3D信息更丰富。因此，作为一种更稳健的备选方案。      ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2025/05/13/orbslam2-6/" title="投影匹配--闭环版"><img class="post-bg" src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250428231554898.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="投影匹配--闭环版"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/13/orbslam2-6/" title="投影匹配--闭环版">投影匹配--闭环版</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-05-13T07:19:29.000Z" title="发表于 2025-05-13 15:19:29">2025-05-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SLAM/">SLAM</a></span></div><div class="content"> 1. 函数背景与目标 这个特定版本的 SearchByProjection 函数在 ORB-SLAM2 的闭环检测 (Loop Closing) 流程中被调用。  调用时机：当系统检测到一个潜在的闭环（当前关键帧 pKF 与过去的某个关键帧 pLoopKF 在同一位置），并且已经成功计算出连接这两个关键帧位姿的 Sim3 变换矩阵 Scw 之后。 函数目标：利用已知的 Scw 变换，为当前关键帧 pKF 中那些尚未建立地图点关联的特征点，去寻找并建立与闭环候选帧 pLoopKF 及其共视帧相关的地图点 (vpPoints) 之间的新匹配关系。其核心目的是增加闭环约束的数量和质量。   2. 核心思想 利用已计算出的 Sim3 变换 Scw 作为几何先验，指导特征匹配过程，从而在两个看似分离的地图部分之间建立更多可靠的连接点。 具体来说，是将 pLoopKF 相关区域的 3D 地图点 (vpPoints)，通过 Scw 变换投影到当前关键帧 pKF 的图像平面上，然后在投影点附近搜索匹配的 pKF 特征点。  3. 主要执行步骤与思想解析  a. 输入与准备 (Code...</div></div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://fyblog.oss-cn-shanghai.aliyuncs.com/blog/20250423093410435.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Xue</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
          </div>
          <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">13</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SLAM/"><span class="card-category-list-name">SLAM</span><span class="card-category-list-count">16</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/docker/"><span class="card-category-list-name">docker</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/git/"><span class="card-category-list-name">git</span><span class="card-category-list-count">1</span></a></li>
          </ul></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>归档</span>
      
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/05/">
            <span class="card-archive-list-date">
              五月 2025
            </span>
            <span class="card-archive-list-count">17</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/04/">
            <span class="card-archive-list-date">
              四月 2025
            </span>
            <span class="card-archive-list-count">15</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站信息</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">32</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总浏览量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-05-26T16:30:54.795Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By Xue</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: str => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: subtitleType => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        btf.getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  },
  processSubtitle: (content, extraContents = []) => {
    if (true) {
      const sub = ["今日事&#44;今日毕","Never put off till tomorrow what you can do today"].slice()

      if (extraContents.length > 0) {
        sub.unshift(...extraContents)
      }

      if (typeof content === 'string') {
        sub.unshift(content)
      } else if (Array.isArray(content)) {
        sub.unshift(...content)
      }

      sub.length > 0 && typedJSFn.init(sub)
    } else {
      document.getElementById('subtitle').textContent = typeof content === 'string' ? content :
        (Array.isArray(content) && content.length > 0 ? content[0] : '')
    }
  }
}
btf.addGlobalFn('pjaxSendOnce', () => { typed.destroy() }, 'typedDestroy')
</script><script>function subtitleType () {
  typedJSFn.processSubtitle(["今日事&#44;今日毕","Never put off till tomorrow what you can do today"])
}
typedJSFn.run(subtitleType)</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>